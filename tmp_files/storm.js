function trace(a){console.log(a)}for(var Storm={},raf_lastTime=0,raf_vendors=["ms","moz","webkit","o"],x=0;x<raf_vendors.length&&!window.requestAnimationFrame;++x)window.requestAnimationFrame=window[raf_vendors[x]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[raf_vendors[x]+"CancelAnimationFrame"]||window[raf_vendors[x]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(a,b){var c=(new Date).getTime(),d=Math.max(0,16-(c-raf_lastTime)),e=window.setTimeout(function(){a(c+d)},d);return raf_lastTime=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)}),Storm.init=function(a){1==a.debug?Storm.debug=!0:Storm.debug=!1;var b=document.createElement("div");if(b.style.display="none",b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.innerHTML='<canvas id="stageTemp" width="'+a.width+'" height="'+a.height+'" style="display:none;"></canvas>',document.body.appendChild(b),Storm.stage=document.getElementById(a.elementId),Storm.ctx=stage.getContext&&stage.getContext("2d"),Storm.stageTemp=document.getElementById("stageTemp"),Storm.ctxTemp=stageTemp.getContext&&stageTemp.getContext("2d"),Storm.activeUser=!1,Storm.tmEF=!1,Storm.toRAD=Math.PI/180,Storm.aRand=[.915,.755,.415,.115,.15,.975,.385,.355,.205,.77,.775,.01,.03,.04,.32,.06,.345,.485,.73,.425,.24,.685,.79,.215,.295,.07,.2,.1,.705,.83,.31,.16,.52,.955,.265,.395,.645,.405,.55,.635,.325,.445,.46,.93,.74,.92,.765,.4,.5,.165,.13,.66,.6,.435,.41,0,.22,.585,.805,.61,.965,.715,.845,.58,.62,.17,.12,.505,.905,.65,.035,.855,.285,.335,.76,.865,.075,.515,.25,.095,.51,.155,.615,.555,.48,.7,.565,.91,.63,.87,.995,.53,.11,.97,.005,.71,.145,.9,.78,.96,.26,.225,.055,.28,.57,.365,.125,.795,.235,.375,.81,.59,.88,.625,.82,.735,.695,.02,.99,.98,.545,.465,.935,.05,.065,.34,.56,.785,.85,.3,.69,.595,.655,.09,.195,.875,.19,.29,.135,.08,.275,.54,.675,.72,.84,.86,.925,.64,.085,.745,.8,.68,.825,.475,.27,.43,.605,.245,.895,.95,.89,.33,.885,.35,.49,.18,.67,.045,.36,.175,.305,.37,.23,.725,.105,.45,.575,.94,.665,.495,.39,.44,.835,.525,.21,.455,.47,.945,.42,.815,.255,.315,.14,.535,.38,.985,.025,.185,.015,.75],Storm.idRandom=0,Storm.stageWidth=a.width,Storm.stageHeight=a.height,1==a.retina?Storm.retina=2:Storm.retina=1,Storm.obj={},Storm.bitmaps={},Storm.completeLoadImages=a.complete,Storm.numLoadImages=0,Storm.numTotalImages=a.graphics.length,0==Storm.numTotalImages)Storm.completeLoadImages();else for(Storm.i=0;Storm.i<Storm.numTotalImages;Storm.i++)a.names?Storm.str=a.names[Storm.i]:(Storm.n1=a.graphics[Storm.i].lastIndexOf("/"),Storm.n2=a.graphics[Storm.i].lastIndexOf("."),Storm.n1==-1&&(Storm.n1=-1),Storm.n2==-1&&(Storm.n2=a.graphics[Storm.i].length),Storm.str=a.graphics[Storm.i].substring(Storm.n1+1,Storm.n2)),Storm.bitmaps[Storm.str]=new Image,Storm.bitmaps[Storm.str].onload=function(){++Storm.numLoadImages>=Storm.numTotalImages&&Storm.completeLoadImages()},Storm.bitmaps[Storm.str].src=a.graphics[Storm.i];Storm.stage.addEventListener("click",function(a){Storm.mouseX=(a.pageX-Storm.stage.offsetLeft)*Storm.retina,Storm.mouseY=(a.pageY-Storm.stage.offsetTop)*Storm.retina;for(Storm.tObj in Storm.obj)if(1==Storm.obj[Storm.tObj].visible||1==Storm.obj[Storm.tObj].visible)if(""!=Storm.obj[Storm.tObj].bitmap&&void 0!=Storm.obj[Storm.tObj].onClick&&Storm.mouseX>Storm.obj[Storm.tObj]._x-Storm.obj[Storm.tObj].bitmap.width/2*Storm.obj[Storm.tObj].scaleX&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].bitmap.width/2*Storm.obj[Storm.tObj].scaleX&&Storm.mouseY>Storm.obj[Storm.tObj]._y-Storm.obj[Storm.tObj].bitmap.height/2*Storm.obj[Storm.tObj].scaleY&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].bitmap.height/2*Storm.obj[Storm.tObj].scaleY){if(Storm.obj[Storm.tObj].onClick(),1==Storm.obj[Storm.tObj].breakEvent)break}else if(""!=Storm.obj[Storm.tObj].graphics&&void 0!=Storm.obj[Storm.tObj].onClick&&Storm.mouseX>Storm.obj[Storm.tObj]._x&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].width&&Storm.mouseY>Storm.obj[Storm.tObj]._y&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].height&&(Storm.obj[Storm.tObj].onClick(),1==Storm.obj[Storm.tObj].breakEvent))break}),Storm.stage.addEventListener("mousedown",function(a){Storm.mouseX=(a.pageX-Storm.stage.offsetLeft)*Storm.retina,Storm.mouseY=(a.pageY-Storm.stage.offsetTop)*Storm.retina;for(Storm.tObj in Storm.obj)if(1==Storm.obj[Storm.tObj].visible||1==Storm.obj[Storm.tObj].visible)if(""!=Storm.obj[Storm.tObj].bitmap&&void 0!=Storm.obj[Storm.tObj].onDown&&Storm.mouseX>Storm.obj[Storm.tObj]._x-Storm.obj[Storm.tObj].bitmap.width/2*Storm.obj[Storm.tObj].scaleX&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].bitmap.width/2*Storm.obj[Storm.tObj].scaleX&&Storm.mouseY>Storm.obj[Storm.tObj]._y-Storm.obj[Storm.tObj].bitmap.height/2*Storm.obj[Storm.tObj].scaleY&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].bitmap.height/2*Storm.obj[Storm.tObj].scaleY){if(Storm.obj[Storm.tObj].onDown(),1==Storm.obj[Storm.tObj].breakEvent)break}else if(""!=Storm.obj[Storm.tObj].graphics&&void 0!=Storm.obj[Storm.tObj].onDown&&Storm.mouseX>Storm.obj[Storm.tObj]._x&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].width&&Storm.mouseY>Storm.obj[Storm.tObj]._y&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].height&&(Storm.obj[Storm.tObj].onDown(),1==Storm.obj[Storm.tObj].breakEvent))break}),Storm.stage.addEventListener("mouseup",function(a){Storm.mouseX=(a.pageX-Storm.stage.offsetLeft)*Storm.retina,Storm.mouseY=(a.pageY-Storm.stage.offsetTop)*Storm.retina;for(Storm.tObj in Storm.obj)if(1==Storm.obj[Storm.tObj].visible||1==Storm.obj[Storm.tObj].visible)if(""!=Storm.obj[Storm.tObj].bitmap&&void 0!=Storm.obj[Storm.tObj].onUp&&Storm.mouseX>Storm.obj[Storm.tObj]._x-Storm.obj[Storm.tObj].bitmap.width/2*Storm.obj[Storm.tObj].scaleX&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].bitmap.width/2*Storm.obj[Storm.tObj].scaleX&&Storm.mouseY>Storm.obj[Storm.tObj]._y-Storm.obj[Storm.tObj].bitmap.height/2*Storm.obj[Storm.tObj].scaleY&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].bitmap.height/2*Storm.obj[Storm.tObj].scaleY){if(Storm.obj[Storm.tObj].onUp(),1==Storm.obj[Storm.tObj].breakEvent)break}else if(""!=Storm.obj[Storm.tObj].graphics&&void 0!=Storm.obj[Storm.tObj].onUp&&Storm.mouseX>Storm.obj[Storm.tObj]._x&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].width&&Storm.mouseY>Storm.obj[Storm.tObj]._y&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].height&&(Storm.obj[Storm.tObj].onUp(),1==Storm.obj[Storm.tObj].breakEvent))break}),Storm.stage.addEventListener("mouseout",function(a){for(Storm.tObj in Storm.obj)1!=Storm.obj[Storm.tObj].visible&&1!=Storm.obj[Storm.tObj].visible||void 0!=Storm.obj[Storm.tObj].onOut&&Storm.obj[Storm.tObj].onOut()}),Storm.stage.addEventListener("mousemove",function(a){Storm.mouseX=(a.pageX-Storm.stage.offsetLeft)*Storm.retina,Storm.mouseY=(a.pageY-Storm.stage.offsetTop)*Storm.retina;for(Storm.tObj in Storm.obj)1!=Storm.obj[Storm.tObj].visible&&1!=Storm.obj[Storm.tObj].visible||void 0!=Storm.obj[Storm.tObj].onOver&&void 0!=Storm.obj[Storm.tObj].onOut&&(""!=Storm.obj[Storm.tObj].bitmap&&Storm.mouseX>Storm.obj[Storm.tObj]._x-Storm.obj[Storm.tObj].bitmap.width/2&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].bitmap.width/2&&Storm.mouseY>Storm.obj[Storm.tObj]._y-Storm.obj[Storm.tObj].bitmap.height/2&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].bitmap.height/2?Storm.obj[Storm.tObj].onOver():"rect"==Storm.obj[Storm.tObj].graphics&&Storm.mouseX>Storm.obj[Storm.tObj]._x&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].width&&Storm.mouseY>Storm.obj[Storm.tObj]._y&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].height?Storm.obj[Storm.tObj].onOver():"circle"==Storm.obj[Storm.tObj].graphics&&Storm.mouseX>Storm.obj[Storm.tObj]._x-Storm.obj[Storm.tObj].radius*Storm.obj[Storm.tObj].mouseZoneKoef&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].radius*Storm.obj[Storm.tObj].mouseZoneKoef&&Storm.mouseY>Storm.obj[Storm.tObj]._y-Storm.obj[Storm.tObj].radius*Storm.obj[Storm.tObj].mouseZoneKoef&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].radius*Storm.obj[Storm.tObj].mouseZoneKoef?Storm.obj[Storm.tObj].onOver():"over"==Storm.obj[Storm.tObj].stateMouse&&Storm.obj[Storm.tObj].onOut())}),1==Storm.debug&&(Storm.debugTarget=null,Storm.stage.addEventListener("mousedown",function(a){for(Storm.tObj in Storm.obj)1!=Storm.obj[Storm.tObj].visible&&1!=Storm.obj[Storm.tObj].visible||(""!=Storm.obj[Storm.tObj].bitmap&&Storm.mouseX>Storm.obj[Storm.tObj]._x-Storm.obj[Storm.tObj].bitmap.width/2&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].bitmap.width/2&&Storm.mouseY>Storm.obj[Storm.tObj]._y-Storm.obj[Storm.tObj].bitmap.height/2&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].bitmap.height/2?(Storm.debugTarget=Storm.obj[Storm.tObj],Storm.debugX=Storm.obj[Storm.tObj].x-a.pageX-Storm.stage.offsetLeft,Storm.debugY=Storm.obj[Storm.tObj].y-a.pageY-Storm.stage.offsetTop):""!=Storm.obj[Storm.tObj].graphics&&Storm.mouseX>Storm.obj[Storm.tObj]._x&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].width&&Storm.mouseY>Storm.obj[Storm.tObj]._y&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].height&&(Storm.debugTarget=Storm.obj[Storm.tObj],Storm.debugX=Storm.obj[Storm.tObj].x-a.pageX-Storm.stage.offsetLeft,Storm.debugY=Storm.obj[Storm.tObj].y-a.pageY-Storm.stage.offsetTop))}),Storm.stage.addEventListener("mouseup",function(a){null!=Storm.debugTarget&&(Storm.debugTarget=null)}),Storm.stage.addEventListener("dblclick",function(a){for(Storm.tObj in Storm.obj)if(1==Storm.obj[Storm.tObj].visible||1==Storm.obj[Storm.tObj].visible){if(""!=Storm.obj[Storm.tObj].bitmap&&Storm.mouseX>Storm.obj[Storm.tObj]._x-Storm.obj[Storm.tObj].bitmap.width/2&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].bitmap.width/2&&Storm.mouseY>Storm.obj[Storm.tObj]._y-Storm.obj[Storm.tObj].bitmap.height/2&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].bitmap.height/2){Storm.obj[Storm.tObj].visible=!1;break}if(""!=Storm.obj[Storm.tObj].graphics&&Storm.mouseX>Storm.obj[Storm.tObj]._x&&Storm.mouseX<Storm.obj[Storm.tObj]._x+Storm.obj[Storm.tObj].width&&Storm.mouseY>Storm.obj[Storm.tObj]._y&&Storm.mouseY<Storm.obj[Storm.tObj]._y+Storm.obj[Storm.tObj].height){Storm.obj[Storm.tObj].visible=!1;break}}})),Storm.EF=window.requestAnimationFrame(Storm.Update)},Storm.Update=function(){Storm.DriveDisplayList(),Storm.enterFrame&&Storm.enterFrame(),Storm.EF=window.requestAnimationFrame(Storm.Update)},Storm.Random=function(a){return Storm._nRand=a*Storm.aRand[Storm.idRandom],Storm.idRandom++,Storm.idRandom==Storm.aRand.length&&(Storm.idRandom=0),Storm._nRandCeil=Math.ceil(Storm._nRand),Storm._nRandCeil==a&&Storm._nRandCeil--,Storm._nRandCeil},Storm.convertHex=function(a,c){return a=a.replace("#",""),r=parseInt(a.substring(0,2),16),g=parseInt(a.substring(2,4),16),b=parseInt(a.substring(4,6),16),result="rgba("+r+","+g+","+b+","+c+")",result},Storm.addChild=function(a){var b=this;b!=Storm.stage&&1!=b.displayObject&&(b=Storm.stage),a.parent=b},Storm.mask=function(a){var b=this;a.is_mask=!0,b.to_mask=a;for(Storm.tObj in Storm.obj)Storm.obj[Storm.tObj].parent==b&&(Storm.obj[Storm.tObj].to_mask=a)},Storm.SaveDisplayList=function(){for(Storm.tObj in Storm.obj)if(Storm.obj[Storm.tObj].x=Math.ceil(Storm.obj[Storm.tObj].x),Storm.obj[Storm.tObj].y=Math.ceil(Storm.obj[Storm.tObj].y),0!=Storm.obj[Storm.tObj].reboot){if(Storm.obj[Storm.tObj].m_scaleX=Storm.obj[Storm.tObj].scaleX,Storm.obj[Storm.tObj].m_scaleY=Storm.obj[Storm.tObj].scaleY,Storm.obj[Storm.tObj].m_alpha=Storm.obj[Storm.tObj].alpha,Storm.obj[Storm.tObj].m_visible=Storm.obj[Storm.tObj].visible,Storm.obj[Storm.tObj].m_x=Storm.obj[Storm.tObj].x,Storm.obj[Storm.tObj].m_y=Storm.obj[Storm.tObj].y,Storm.obj[Storm.tObj].m_rotation=Storm.obj[Storm.tObj].rotation,Storm.obj[Storm.tObj].m_tint=Storm.obj[Storm.tObj].tint,""!=Storm.obj[Storm.tObj].text)for(Storm.i=0;Storm.i<Storm.obj[Storm.tObj].textLines.length;Storm.i++)Storm.obj[Storm.tObj]["line_"+Storm.i].m_scaleX=Storm.obj[Storm.tObj]["line_"+Storm.i].scaleX,Storm.obj[Storm.tObj]["line_"+Storm.i].m_scaleY=Storm.obj[Storm.tObj]["line_"+Storm.i].scaleY,Storm.obj[Storm.tObj]["line_"+Storm.i].m_alpha=Storm.obj[Storm.tObj]["line_"+Storm.i].alpha,Storm.obj[Storm.tObj]["line_"+Storm.i].m_visible=Storm.obj[Storm.tObj]["line_"+Storm.i].visible,Storm.obj[Storm.tObj]["line_"+Storm.i].m_x=Storm.obj[Storm.tObj]["line_"+Storm.i].x,Storm.obj[Storm.tObj]["line_"+Storm.i].m_y=Storm.obj[Storm.tObj]["line_"+Storm.i].y,Storm.obj[Storm.tObj]["line_"+Storm.i].m_rotation=Storm.obj[Storm.tObj]["line_"+Storm.i].rotation;if(""!=Storm.obj[Storm.tObj].particles)for(Storm.i=0;Storm.i<Storm.obj[Storm.tObj].quantity;Storm.i++)Storm.obj[Storm.tObj].particle[Storm.i].isEnable=!0,Storm.obj[Storm.tObj].particle[Storm.i].m_scaleX=Storm.obj[Storm.tObj].particle[Storm.i].scaleX,Storm.obj[Storm.tObj].particle[Storm.i].m_scaleY=Storm.obj[Storm.tObj].particle[Storm.i].scaleY,Storm.obj[Storm.tObj].particle[Storm.i].m_alpha=Storm.obj[Storm.tObj].particle[Storm.i].alpha,Storm.obj[Storm.tObj].particle[Storm.i].m_visible=Storm.obj[Storm.tObj].particle[Storm.i].visible,Storm.obj[Storm.tObj].particle[Storm.i].m_x=Storm.obj[Storm.tObj].particle[Storm.i].x,Storm.obj[Storm.tObj].particle[Storm.i].m_y=Storm.obj[Storm.tObj].particle[Storm.i].y,Storm.obj[Storm.tObj].particle[Storm.i].m_rotation=Storm.obj[Storm.tObj].particle[Storm.i].rotation}},Storm.RebootDisplayList=function(){for(Storm.tObj in Storm.obj)0!=Storm.obj[Storm.tObj].reboot&&Storm.RebootDisplayObject(Storm.obj[Storm.tObj])},Storm.RebootDisplayObject=function(a){if(a.scaleX=a.m_scaleX,a.scaleY=a.m_scaleY,a.alpha=a.m_alpha,a.visible=a.m_visible,a.x=a.m_x,a.y=a.m_y,a.rotation=a.m_rotation,a.tint=a.m_tint,""!=a.particles)for(Storm.i=0;Storm.i<a.quantity;Storm.i++)a.particle[Storm.i].isEnable=!0,a.particle[Storm.i].scaleX=a.particle[Storm.i].m_scaleX,a.particle[Storm.i].scaleY=a.particle[Storm.i].m_scaleY,a.particle[Storm.i].alpha=a.particle[Storm.i].m_alpha,a.particle[Storm.i].visible=a.particle[Storm.i].m_visible,a.particle[Storm.i].x=a.particle[Storm.i].m_x,a.particle[Storm.i].y=a.particle[Storm.i].m_y,a.particle[Storm.i].rotation=a.particle[Storm.i].m_rotation;if(""!=a.text)for(Storm.i=0;Storm.i<Storm.obj[Storm.tObj].textLines.length;Storm.i++)a["line_"+Storm.i].scaleX=a["line_"+Storm.i].m_scaleX,a["line_"+Storm.i].scaleY=a["line_"+Storm.i].m_scaleY,a["line_"+Storm.i].alpha=a["line_"+Storm.i].m_alpha,a["line_"+Storm.i].visible=a["line_"+Storm.i].m_visible,a["line_"+Storm.i].x=a["line_"+Storm.i].m_x,a["line_"+Storm.i].y=a["line_"+Storm.i].m_y,a["line_"+Storm.i].rotation=a["line_"+Storm.i].m_rotation;try{TweenLite.killTweensOf(a)}catch(a){}try{TweenMax.killTweensOf(a)}catch(a){}},Storm.CreateDisplayList=function(){Storm.stage.x=Storm.stage.y=Storm.stage.z=Storm.stage.rotation=0,Storm.stage.alpha=Storm.stage.visible=Storm.stage.scaleX=Storm.stage.scaleY=1,Storm.stage.parent=Storm.stage,Storm.stage.addChild=Storm.addChild;for(Storm.tObj in Storm.obj){if(void 0==Storm.obj[Storm.tObj].displayObject&&(Storm.obj[Storm.tObj].displayObject=!0),void 0==Storm.obj[Storm.tObj].x&&(Storm.obj[Storm.tObj].x=0),void 0==Storm.obj[Storm.tObj].y&&(Storm.obj[Storm.tObj].y=0),void 0==Storm.obj[Storm.tObj].z&&(Storm.obj[Storm.tObj].z=0),void 0==Storm.obj[Storm.tObj].scaleX&&(Storm.obj[Storm.tObj].scaleX=1),void 0==Storm.obj[Storm.tObj].scaleY&&(Storm.obj[Storm.tObj].scaleY=1),void 0==Storm.obj[Storm.tObj].rotation&&(Storm.obj[Storm.tObj].rotation=0),void 0==Storm.obj[Storm.tObj].alpha&&(Storm.obj[Storm.tObj].alpha=1),void 0==Storm.obj[Storm.tObj].visible&&(Storm.obj[Storm.tObj].visible=!0),void 0==Storm.obj[Storm.tObj].width&&(Storm.obj[Storm.tObj].width=0),void 0==Storm.obj[Storm.tObj].height&&(Storm.obj[Storm.tObj].height=0),void 0==Storm.obj[Storm.tObj].bitmap?Storm.obj[Storm.tObj].bitmap="":(0==Storm.obj[Storm.tObj].width&&(Storm.obj[Storm.tObj].width=Storm.obj[Storm.tObj].bitmap.width),0==Storm.obj[Storm.tObj].height&&(Storm.obj[Storm.tObj].height=Storm.obj[Storm.tObj].bitmap.height)),void 0==Storm.obj[Storm.tObj].text)Storm.obj[Storm.tObj].text="";else for(Storm.obj[Storm.tObj].textLines=Storm.obj[Storm.tObj].text.split("<n>"),Storm.i=0;Storm.i<Storm.obj[Storm.tObj].textLines.length;Storm.i++)Storm.obj[Storm.tObj]["line_"+Storm.i]={text:Storm.obj[Storm.tObj].textLines[Storm.i],x:0,y:0,alpha:1,rotation:0,scaleX:1,scaleY:1};if(void 0==Storm.obj[Storm.tObj].graphics&&(Storm.obj[Storm.tObj].graphics=""),void 0==Storm.obj[Storm.tObj].pattern&&(Storm.obj[Storm.tObj].pattern=""),void 0==Storm.obj[Storm.tObj].gradient&&(Storm.obj[Storm.tObj].gradient=""),void 0==Storm.obj[Storm.tObj].gradientScale&&(Storm.obj[Storm.tObj].gradientScale=1),void 0==Storm.obj[Storm.tObj].particles)Storm.obj[Storm.tObj].particles="";else for(Storm.obj[Storm.tObj].particle=[],Storm.randId=0,Storm.i=0;Storm.i<Storm.obj[Storm.tObj].quantity;Storm.i++)Storm.obj[Storm.tObj].particle.push({x:0,y:0,scaleX:1,scaleY:1,alpha:1,visible:!0,rotation:0,graphicId:Storm.randId,isEnable:!0}),Storm.randId++,Storm.randId==Storm.obj[Storm.tObj].particles.length&&(Storm.randId=0);void 0==Storm.obj[Storm.tObj].video&&(Storm.obj[Storm.tObj].video=""),void 0==Storm.obj[Storm.tObj].overlay&&(Storm.obj[Storm.tObj].overlay=""),void 0==Storm.obj[Storm.tObj].tint&&(Storm.obj[Storm.tObj].tint=""),void 0==Storm.obj[Storm.tObj].tintColor&&(Storm.obj[Storm.tObj].tintColor="#000000"),void 0==Storm.obj[Storm.tObj].is_play&&(Storm.obj[Storm.tObj].is_play=!1),void 0==Storm.obj[Storm.tObj].fill&&(Storm.obj[Storm.tObj].fill=""),void 0==Storm.obj[Storm.tObj].stroke&&(Storm.obj[Storm.tObj].stroke=""),void 0==Storm.obj[Storm.tObj].lineWidth&&(Storm.obj[Storm.tObj].lineWidth=1),void 0==Storm.obj[Storm.tObj].lineHeight&&(Storm.obj[Storm.tObj].lineHeight=26),void 0==Storm.obj[Storm.tObj].mouseZoneKoef&&(Storm.obj[Storm.tObj].mouseZoneKoef=1),void 0==Storm.obj[Storm.tObj].shadowColor&&(Storm.obj[Storm.tObj].shadowColor=""),void 0==Storm.obj[Storm.tObj].parent&&(Storm.obj[Storm.tObj].parent=Storm.stage,Storm.stage.addChild(Storm.obj[Storm.tObj])),void 0==Storm.obj[Storm.tObj].addChild&&(Storm.obj[Storm.tObj].addChild=Storm.addChild),void 0==Storm.obj[Storm.tObj].repeatX&&(Storm.obj[Storm.tObj].repeatX=1),void 0==Storm.obj[Storm.tObj].repeatY&&(Storm.obj[Storm.tObj].repeatY=1),void 0==Storm.obj[Storm.tObj].reboot&&(Storm.obj[Storm.tObj].reboot=!0),void 0==Storm.obj[Storm.tObj].is_stop&&(Storm.obj[Storm.tObj].is_stop=!0),void 0==Storm.obj[Storm.tObj].mask&&(Storm.obj[Storm.tObj].mask=Storm.mask),void 0==Storm.obj[Storm.tObj].to_mask&&(Storm.obj[Storm.tObj].to_mask=""),void 0==Storm.obj[Storm.tObj].is_mask&&(Storm.obj[Storm.tObj].is_mask=""),void 0==Storm.obj[Storm.tObj].align&&(Storm.obj[Storm.tObj].align="center"),void 0==Storm.obj[Storm.tObj].valign&&(Storm.obj[Storm.tObj].valign="center")}},Storm.DriveDisplayList=function(){Storm.ctx.clearRect(0,0,Storm.stage.width-1,Storm.stage.height-1),Storm.ctxTemp.clearRect(0,0,Storm.stage.width-1,Storm.stage.height-1),Storm.tObjTotal=0,Storm.tObjDrawing=0;for(Storm.tObj in Storm.obj)Storm.tObjTotal++,(""!=Storm.obj[Storm.tObj].bitmap||""!=Storm.obj[Storm.tObj].overlay||""!=Storm.obj[Storm.tObj].text||""!=Storm.obj[Storm.tObj].graphics||""!=Storm.obj[Storm.tObj].video||""!=Storm.obj[Storm.tObj].pattern||""!=Storm.obj[Storm.tObj].particles||""!=Storm.obj[Storm.tObj].gradient)&&(1==Storm.obj[Storm.tObj].visible||1==Storm.obj[Storm.tObj].visible)&&(1==Storm.obj[Storm.tObj].parent.visible||1==Storm.obj[Storm.tObj].parent.visible)&&Storm.obj[Storm.tObj].alpha>0&&Storm.obj[Storm.tObj].parent.alpha>0&&""==Storm.obj[Storm.tObj].is_mask&&(""!=Storm.obj[Storm.tObj].to_mask?(Storm.ctxTemp.save(),Storm.ctxTemp.clearRect(0,0,Storm.stage.width,Storm.stage.height),""!=Storm.obj[Storm.tObj].overlay&&(Storm.ctxTemp.drawImage(Storm.stage,0,0),Storm.ctxTemp.globalCompositeOperation=Storm.obj[Storm.tObj].type),Storm.DrawingObject(Storm.obj[Storm.tObj]),Storm.ctxTemp.restore(),Storm.ctxTemp.save(),Storm.ctxTemp.globalCompositeOperation="destination-in",Storm.DrawingObject(Storm.obj[Storm.tObj].to_mask),Storm.ctxTemp.restore(),Storm.ctx.drawImage(Storm.stageTemp,0,0)):""!=Storm.obj[Storm.tObj].overlay?(Storm.ctxTemp.save(),Storm.ctxTemp.clearRect(0,0,Storm.stage.width,Storm.stage.height),Storm.ctxTemp.drawImage(Storm.stage,0,0),Storm.ctxTemp.globalCompositeOperation=Storm.obj[Storm.tObj].type,Storm.DrawingObject(Storm.obj[Storm.tObj]),Storm.ctxTemp.restore(),Storm.ctx.drawImage(Storm.stageTemp,0,0)):(Storm.ctxTemp.save(),Storm.ctxTemp.clearRect(0,0,Storm.stage.width-1,Storm.stage.height-1),Storm.DrawingObject(Storm.obj[Storm.tObj]),Storm.ctxTemp.restore(),Storm.ctx.drawImage(Storm.stageTemp,0,0)),""!=Storm.obj[Storm.tObj].tint&&(Storm.ctxTemp.save(),Storm.ctxTemp.clearRect(0,0,Storm.stage.width,Storm.stage.height),Storm.ctxTemp.drawImage(Storm.stage,0,0),Storm.ctxTemp.fillStyle=Storm.convertHex(Storm.obj[Storm.tObj].tintColor,Storm.obj[Storm.tObj].tint),Storm.ctxTemp.fillRect(0,0,Storm.stage.width,Storm.stage.height),Storm.ctxTemp.restore(),Storm.ctxTemp.save(),Storm.ctxTemp.globalCompositeOperation="destination-in",Storm.DrawingObject(Storm.obj[Storm.tObj]),Storm.ctxTemp.restore(),Storm.ctx.drawImage(Storm.stageTemp,0,0)))},Storm.DrawingObject=function(a){a._x=a.x,a._y=a.y,a._scaleX=a.scaleX,a._scaleY=a.scaleY,a._alpha=a.alpha,a._rotation=a.rotation,Storm.pObj=a.parent;do{if(0==Storm.pObj.visible||0==Storm.pObj.visible||0==Storm.pObj.alpha){a._alpha=0;break}a.x0=a._x,a.y0=a._y,a._x=a.x0*Math.cos(Storm.pObj.rotation*Storm.toRAD)-a.y0*Math.sin(Storm.pObj.rotation*Storm.toRAD),a._y=a.x0*Math.sin(Storm.pObj.rotation*Storm.toRAD)+a.y0*Math.cos(Storm.pObj.rotation*Storm.toRAD),a._x=a._x*Storm.pObj.scaleX,a._y=a._y*Storm.pObj.scaleY,a._x+=Storm.pObj.x,a._y+=Storm.pObj.y,a._scaleX*=Storm.pObj.scaleX,a._scaleY*=Storm.pObj.scaleY,a._alpha*=Storm.pObj.alpha,a._rotation+=Storm.pObj.rotation,Storm.pObj=Storm.pObj.parent}while(Storm.pObj!=Storm.stage);if(0==a._alpha)return!1;if(Storm.tObjDrawing++,Storm.ctxTemp.translate(a._x,a._y),Storm.ctxTemp.rotate(a._rotation*Storm.toRAD),Storm.ctxTemp.globalAlpha=a._alpha,Storm.ctxTemp.scale(a._scaleX,a._scaleY),""!=a.text)for(Storm.i=0;Storm.i<a.textLines.length;Storm.i++)Storm.j=Storm.i*a.lineHeight,"top"!=a.valign&&(Storm.j=Storm.j-(a.textLines.length-1)*a.lineHeight*.5),Storm.ctxTemp.translate(0,Storm.j),Storm.ctxTemp.translate(a["line_"+Storm.i].x,a["line_"+Storm.i].y),Storm.ctxTemp.globalAlpha=a["line_"+Storm.i].alpha*a.alpha,Storm.ctxTemp.rotate(a["line_"+Storm.i].rotation*Storm.toRAD),Storm.ctxTemp.scale(a["line_"+Storm.i].scaleX,a["line_"+Storm.i].scaleY),Storm.ctxTemp.font=a.font,String(a.color).length>7?Storm.ctxTemp.fillStyle=a.color:Storm.ctxTemp.fillStyle=Storm.convertHex(a.color,a["line_"+Storm.i].alpha*a.alpha),Storm.ctxTemp.textAlign=a.align,Storm.ctxTemp.textBaseline="middle",""!=a.shadowColor&&(Storm.ctxTemp.shadowColor=a.shadowColor,Storm.ctxTemp.shadowBlur=a.shadowBlur,Storm.ctxTemp.shadowOffsetX=a.shadowOffsetX,Storm.ctxTemp.shadowOffsetY=a.shadowOffsetY),""!=a.stroke&&(Storm.ctxTemp.lineWidth=a.lineWidth,Storm.ctxTemp.strokeStyle=a.stroke,Storm.ctxTemp.strokeText(a.textLines[Storm.i],0,0)),Storm.ctxTemp.fillText(a.textLines[Storm.i],0,0),Storm.ctxTemp.scale(1/a["line_"+Storm.i].scaleX,1/a["line_"+Storm.i].scaleY),Storm.ctxTemp.rotate(-a["line_"+Storm.i].rotation*Storm.toRAD),Storm.ctxTemp.globalAlpha=a._alpha,Storm.ctxTemp.translate(-a["line_"+Storm.i].x,-a["line_"+Storm.i].y),Storm.ctxTemp.translate(0,-Storm.j);else if(""!=a.video&&1==a.is_play)Storm.ctxTemp.drawImage(a.video,0,0,a.width,a.height);else if("rect"==a.graphics)""!=a.fill&&(Storm.ctxTemp.fillStyle=a.fill,Storm.ctxTemp.fillRect(0,0,a.width,a.height)),""!=a.stroke&&(Storm.ctxTemp.beginPath(),Storm.ctxTemp.lineWidth=a.lineWidth,Storm.ctxTemp.strokeStyle=a.stroke,Storm.ctxTemp.rect(0,0,a.width,a.height),Storm.ctxTemp.stroke());else if("circle"==a.graphics)Storm.ctxTemp.beginPath(),Storm.ctxTemp.arc(0,0,a.radius,0,2*Math.PI,!1),""!=a.shadowColor&&(Storm.ctxTemp.shadowColor=a.shadowColor,Storm.ctxTemp.shadowBlur=a.shadowBlur,Storm.ctxTemp.shadowOffsetX=a.shadowOffsetX,Storm.ctxTemp.shadowOffsetY=a.shadowOffsetY),""!=a.fill&&(Storm.ctxTemp.fillStyle=a.fill,Storm.ctxTemp.fill()),""!=a.stroke&&(Storm.ctxTemp.lineWidth=a.lineWidth,Storm.ctxTemp.strokeStyle=a.stroke,Storm.ctxTemp.stroke());else if(""!=a.pattern)Storm.ctxTemp.fillStyle=Storm.ctxTemp.createPattern(a.pattern,"repeat"),Storm.ctxTemp.fillRect(0,0,a.width,a.height);else if(""!=a.gradient){var b=Storm.ctxTemp.createLinearGradient(0,0,0,a.height);b.addColorStop(0,"rgba("+a.gradient+", 1)"),b.addColorStop(1-a.gradientScale,"rgba("+a.gradient+", 1)"),b.addColorStop(1,"rgba("+a.gradient+", 0)"),Storm.ctxTemp.fillStyle=b,Storm.ctxTemp.fillRect(0,0,a.width,a.height)}else if(""!=a.bitmap)for(Storm.i=0;Storm.i<a.repeatX;Storm.i++)for(Storm.j=0;Storm.j<a.repeatY;Storm.j++)Storm.ctxTemp.drawImage(a.bitmap,-Math.ceil(a.bitmap.width/2)+a.bitmap.width*Storm.i,-Math.ceil(a.bitmap.height/2)+a.bitmap.height*Storm.j);else if(""!=a.particles)for(Storm.ctxTemp.scale(1/a._scaleX,1/a._scaleY),Storm.i=0;Storm.i<a.quantity;Storm.i++)1==a.particle[Storm.i].isEnable&&(Storm.ctxTemp.save(),Storm.ctxTemp.translate(a.particle[Storm.i].x*a._scaleX,a.particle[Storm.i].y*a._scaleY),Storm.ctxTemp.globalAlpha=a._alpha*a.particle[Storm.i].alpha,Storm.ctxTemp.scale(a._scaleX*a.particle[Storm.i].scaleX,a._scaleY*a.particle[Storm.i].scaleY),Storm.ctxTemp.rotate((a._rotation+a.particle[Storm.i].rotation)*Storm.toRAD),1==Array.isArray(a.particles)?(Storm.thisObj=a.particles[a.particle[Storm.i].graphicId],Storm.ctxTemp.drawImage(Storm.thisObj,-Math.ceil(Storm.thisObj.width/2),-Math.ceil(Storm.thisObj.height/2))):Storm.ctxTemp.drawImage(a.particles,-Math.ceil(a.particles.width/2),-Math.ceil(a.particles.height/2)),Storm.ctxTemp.restore());else if(""!=a.overlay)for(Storm.i=0;Storm.i<a.repeatX;Storm.i++)for(Storm.j=0;Storm.j<a.repeatY;Storm.j++)Storm.ctxTemp.drawImage(a.overlay,-Math.ceil(a.overlay.width/2)+a.overlay.width*Storm.i,-Math.ceil(a.overlay.height/2)+a.overlay.height*Storm.j)};